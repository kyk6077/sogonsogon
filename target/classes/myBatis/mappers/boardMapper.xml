<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="BoardMapper">
  	<insert id="boardInsert" parameterType="BoardDTO">
  		insert into board (bnum,title,writer,contents,reg_date,hit) values (BOARD_SEQ.nextval,#{title},#{writer},#{contents},sysdate,0)
  	</insert>
  	
  	<select id="boardList" parameterType="com.hj.page.RowNumber" resultType="BoardDTO">
  		select * from (
  		select rownum R,B.* from(
  		select * from board where
  		<choose>
  			<when test="kind == 'title'"> title </when>
  			<when test="kind == 'writer'"> writer </when>
  			<when test="kind == 'contents'"> contents </when>
  		</choose>
  		like #{search}
  		order by bnum desc) B )
  		where R between #{startRow} and #{lastRow}
  	</select>
  	
  	
  	<select id="getNum" parameterType="com.hj.page.RowNumber" resultType="java.lang.Integer">
  		select count(bnum) from board where 
  		<choose>
  			<when test="kind == 'title'"> title </when>
  			<when test="kind == 'writer'"> writer </when>
  			<when test="kind == 'contents'"> contents </when>
  		</choose>
  		like #{search}
  	</select>
  	
  	<select id="boardSelectOne" parameterType="java.lang.Integer" resultType="BoardDTO">
  		select * from board where bnum = #{bnum}
  	</select>
  	
  	<update id="boardUpdate" parameterType="BoardDTO">
  		update board set title = #{title} , contents = #{contents} where bnum = #{bnum}
  	</update>
  	
  	<delete id="boardDelete" parameterType="java.lang.Integer">
  		delete board where bnum = #{bnum}
  	</delete>
  	
  	<update id="boardHitPlus" parameterType="java.lang.Integer">
  		update board set hit = hit+1 where bnum = #{bnum}
  	</update>
  </mapper>
  
  